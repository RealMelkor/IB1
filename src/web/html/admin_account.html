{{define "admin-account"}}
<div style="padding: 30px;"></div>
<div class="center"><h3>Accounts</h3></div>
<table>
	<tr>
		<th>Name</th>
		<th>Rank</th>
		<th>Password</th>
		<th></th>
		<th></th>
	</tr>
	{{range .Accounts}}
	<tr>
		<form method="POST" action="/config/account/update/{{.ID}}">
			<td><input type="text" name="name" required value="{{.Name}}"></td>
			<td>
				<select name="rank">
					{{$Rank := .Rank}}
					{{range ranks}}
					<option {{if eq (rank .) $Rank}}selected{{end}} value="{{.}}">{{capitalize .}}</option>
					{{end}}
				</select>
			</td>
			<td><input type="password" name="password"></td>
			<td><input type="submit" value="Update"></td>
			<td><input type="submit" value="Delete" formaction="/config/account/delete/{{.ID}}"{{if isSelf .}} disabled{{end}}></td>
			<input type="hidden" name="csrf" value="{{get "csrf"}}">
		</form>
	</tr>
	{{end}}
	<tr>
		<form method="POST" action="/config/account/create">
			<td><input type="text" name="name" required></td>
			<td>
				<select name="rank">
					{{range ranks}}
					<option value="{{.}}">{{capitalize .}}</option>
					{{end}}
				</select>
			</td>
			<td><input type="password" name="password" required></td>
			<td><input type="submit" value="Add"></td>
			<input type="hidden" name="csrf" value="{{get "csrf"}}">
		</form>
	</tr>
</table>
<p class="error">{{once "account-error"}}</p>
{{end}}
